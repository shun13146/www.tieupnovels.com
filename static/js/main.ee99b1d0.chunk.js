(window.webpackJsonpillbenet=window.webpackJsonpillbenet||[]).push([[0],{19:function(e,t,n){"use strict";var a=n(4),r=n.n(a),i=n(12),o=n(1),c=n(6),s=n(8),u={mode:"cors",credentials:"include",redirect:"follow"},l=function(){function e(){Object(o.a)(this,e),this.base_path="/novels",this.ep_suffix=".episode.json",this.meta_suffix=".m.json"}return Object(c.a)(e,[{key:"initialize",value:function(e){var t=e.base,n=e.episode_prefix,a=e.meta_prefix;this.base_path="undefined"!==typeof t?t:this.base_path,this.ep_suffix="undefined"!==typeof n?n:this.ep_suffix,this.meta_suffix="undefined"!==typeof a?a:this.meta_suffix}},{key:"fetchNovel",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.base_path,"/").concat(t,"/meta").concat(this.meta_suffix),u);case 3:n=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new s.a({type:"unknown",phase:"fetch",detail:e.t0});case 9:if(n.ok){e.next=11;break}throw new s.a("novel_not_found");case 11:return e.prev=11,e.next=14,n.json();case 14:a=e.sent,e.next=20;break;case 17:throw e.prev=17,e.t1=e.catch(11),new s.a({type:"unknown",phase:"parse",detail:e.t1});case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}},e,this,[[0,6],[11,17]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchEpisode",value:function(){var e=Object(i.a)(r.a.mark(function e(t,n){var a,i,o,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(this.base_path,"/").concat(t,"/meta").concat(this.meta_suffix),u);case 3:a=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new s.a({type:"unknown",phase:"fetch",detail:e.t0});case 9:if(a.ok){e.next=11;break}throw new s.a("novel_not_found");case 11:return e.prev=11,e.next=14,a.json();case 14:i=e.sent,e.next=20;break;case 17:throw e.prev=17,e.t1=e.catch(11),new s.a({type:"unknown",phase:"parse",detail:e.t1});case 20:return e.prev=20,e.next=23,fetch("".concat(this.base_path,"/").concat(t,"/").concat(n).concat(this.ep_suffix),u);case 23:o=e.sent,e.next=29;break;case 26:throw e.prev=26,e.t2=e.catch(20),new s.a({type:"unknown",phase:"fetch",detail:e.t2});case 29:if(o.ok){e.next=31;break}throw new s.a("episode_not_found");case 31:return e.prev=31,e.next=34,o.json();case 34:c=e.sent,e.next=40;break;case 37:throw e.prev=37,e.t3=e.catch(31),new s.a({type:"unknown",phase:"parse",detail:e.t3});case 40:return e.abrupt("return",{meta:i,episode:c});case 41:case"end":return e.stop()}},e,this,[[0,6],[11,17],[20,26],[31,37]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchEpisodeList",value:function(e){throw new Error("Method not implemented.")}},{key:"searchNovel",value:function(e){throw new Error("Method not implemented.")}}]),e}();t.a=new l},2:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return s});var a={text_span:{},text_line:{},initializer:[],finalizer:[],child_component:{},view_component:{}};function r(e){!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&a.initializer.find(function(t){return t===e})||a.initializer.push(e)}function i(e){!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&a.finalizer.find(function(t){return t===e})||a.finalizer.push(e)}function o(e,t,n,r){var i=a["".concat(e,"_component")];i?i[t]&&!r||(i[t]=n):console.warn("unknown storage type: '".concat(e,"'"))}function c(e,t,n,r){"line"===e?!r&&a.text_line.hasOwnProperty(t)||(a.text_line[t]=n):"span"===e?!r&&a.text_span.hasOwnProperty(t)||(a.text_span[t]=n):console.warn("unknown storage type: '".concat(e,"'"))}function s(e,t){delete a["text_".concat(e)][t]}},27:function(e,t,n){e.exports=n(39)},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),o=n.n(i),c=n(14),s=n(11),u=n(1),l=n(6),m=n(10),d=n(7),p=n(9),f=n(4),h=n.n(f),v=n(12),b="\u305f\u3044\u3042\u3063\u3077\uff01",y={"/":function(){var e=Object(v.a)(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(5).then(n.bind(null,43));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),"re^/view/[a-zA-Z0-9]{8}/?$":function(){var e=Object(v.a)(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(4).then(n.bind(null,62));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),"re^/view/[a-zA-Z0-9]{8}/[0-9]+$":function(){var e=Object(v.a)(h.a.mark(function e(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(3).then(n.bind(null,61));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},k=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.UNSAFE_componentWillReceiveProps(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.path){for(var n,a,r=Object.keys(y),i=0;i<r.length;i++){var o=r[i];if(n=e.path,"string"===typeof(a=o.startsWith("re^")?new RegExp(o.substr(2)):o)?n===a:a.test(n))return console.log("matched ".concat(o)),this.setState({content:void 0}),void y[o]().then(function(e){return t.setState({content:e})})}this.setState({content:"NOT FOUND"})}}},{key:"componentDidUpdate",value:function(){var e=document.getElementsByTagName("h1")[0];e&&"#/"!==window.location.hash?(document.title="".concat(b," | ").concat(e.textContent||"\u30ed\u30fc\u30c9\u4e2d..."),e.scrollIntoView({block:"end"})):document.title=b}},{key:"notFound",value:function(){return r.a.createElement("div",{className:"not-found"},r.a.createElement("h1",null,"\u8981\u6c42\u3055\u308c\u305f\u30da\u30fc\u30b8\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f"),r.a.createElement("p",null,"\u8981\u6c42\u3055\u308c\u305f\u30da\u30fc\u30b8\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002 \u5165\u529b\u3057\u305fURL\u304c\u6b63\u3057\u3044\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),r.a.createElement("p",null,"\u3082\u3057\u3001\u30ea\u30f3\u30af\u3092\u305f\u3069\u3063\u3066\u3053\u306e\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u5834\u5408\u306f\u3001\u304a\u624b\u6570\u3067\u3059\u304c\u30b5\u30a4\u30c8\u306e\u7ba1\u7406\u8005\u306b\u9023\u7d61\u3057\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u3042\u308a\u304c\u305f\u304f\u601d\u3044\u307e\u3059\u3002 \u5927\u5909\u3054\u8ff7\u60d1\u3092\u304a\u304b\u3051\u3044\u305f\u3057\u307e\u3057\u305f\u3002"))}},{key:"render",value:function(){var e=this.state.content;return r.a.createElement("main",{className:"contents-body"},r.a.createElement("div",{className:"heading"},r.a.createElement("div",{className:"site-logo"},r.a.createElement(c.b,{to:"/"},r.a.createElement("img",{src:"/header.png",alt:"\u305f\u3044\u3042\u3063\u3077\uff01"}))),r.a.createElement("div",{className:"site-copy"},"\u300c\u4f5c\u54c1\u300d\u3092\u300c\u5091\u4f5c\u300d\u306b\u5909\u3048\u3088\u3046\u3002")),void 0!==e?"NOT FOUND"!==e?r.a.createElement(e,null):this.notFound():r.a.createElement("div",{className:"spinner"}),r.a.createElement("div",{className:"footing"},r.a.createElement("div",{className:"footer-group"},r.a.createElement("div",{className:"site-logo footer-item"},r.a.createElement(c.b,{to:"/"},r.a.createElement("img",{src:"/header.png",alt:"\u305f\u3044\u3042\u3063\u3077\uff01"}))),r.a.createElement("div",{className:"footer-item site-copy"},"\u300c\u4f5c\u54c1\u300d\u3092\u300c\u5091\u4f5c\u300d\u306b\u5909\u3048\u3088\u3046\u3002")),r.a.createElement("div",{className:"footer-group"},r.a.createElement("div",{className:"footer-item"},r.a.createElement("span",null,"\u30b5\u30a4\u30c8\u6848\u5185")),r.a.createElement("div",{className:"footer-item"},r.a.createElement("span",null,"\u30d8\u30eb\u30d7"))),r.a.createElement("div",{className:"footer-group centering"},r.a.createElement("div",{className:"footer-item"},"\xa9 2019 Nishii Yun"))))}}]),t}(r.a.Component),w=function(){return r.a.createElement(c.a,{hashType:"slash"},r.a.createElement("div",{className:"App"},r.a.createElement(s.a,{path:"/",component:function(){return r.a.createElement(k,{path:window.location.hash.substr(1)})}})))},g=n(2);Object(g.e)("span","ruby",function(e,t){t["data-ruby"]=e});var E=function(){function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(u.a)(this,e),this.callback=t,this.fixed=a,this.timestamp=null,this.previous=null,this.animationId=null,this.frame=function(){var e=performance.now();null===n.timestamp&&(n.timestamp=e);var t={count:e-n.timestamp,delta:null===n.previous?null:e-n.previous,overall:e};n.previous=e,n.callback(t)&&(n.fixed?n.animationId=setTimeout(n.frame,33):n.animationId=requestAnimationFrame(n.frame))}}return Object(l.a)(e,[{key:"start",value:function(){this.fixed?this.animationId=setTimeout(this.frame,33):this.animationId=requestAnimationFrame(this.frame)}},{key:"reset",value:function(){this.timestamp=null}}]),e}(),O=new(function(){function e(){Object(u.a)(this,e),this.players=void 0,this.muted=void 0,this.volumeInternal=.5,this.players={}}return Object(l.a)(e,[{key:"clearTrack",value:function(){Object.entries(this.players).forEach(function(e){return e[1].remove()}),this.players={}}},{key:"addTrack",value:function(e,t,n){if(!this.players.hasOwnProperty(e)||n){var a=new Audio;a.src=t,a.style.display="none",a.volume=this.volumeInternal,a.loop=!0,this.players[e]=a,document.body.appendChild(a)}}},{key:"fade",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=this.players[e],i=new E(function(e){return"stop"===t?0===e.count?(r.volume=n.volumeInternal,!0):a<e.count?(r.pause(),r.volume=n.volumeInternal,!1):(r.volume-=n.volumeInternal/a*(e.delta||0),!0):0===e.count?(r.volume=0,r.play(),!0):a<e.count?(r.volume=n.volumeInternal,!1):(r.volume+=n.volumeInternal/a*(e.delta||0),!0)},!0);i.start()}},{key:"fadeAll",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;Object.keys(this.players).forEach(function(a){t.fade(a,e,n)})}},{key:"play",value:function(e){if(e){var t=this.players[e];(t.duration<=0||t.paused)&&t.play()}else Object.entries(this.players).forEach(function(e){var t=e[1];(t.duration<=0||t.paused)&&t.play()})}},{key:"pause",value:function(e){e?this.players[e].pause():Object.entries(this.players).forEach(function(e){return e[1].pause()})}},{key:"volume",set:function(e){this.volumeInternal=e,Object.entries(this.players).forEach(function(t){t[1].volume=e})},get:function(){return this.volumeInternal}},{key:"enabled",set:function(e){console.log(e),e!==this.enabled&&(e?(this.volume=this.muted,this.muted=void 0):(this.muted=this.volume,this.volume=0))},get:function(){return void 0===this.muted}}]),e}());Object(g.d)(function(e){if(e.meta&&e.meta.custom_data){var t=e.meta.custom_data.resources;t&&Object.entries(t.audio||{}).forEach(function(e){return O.addTrack(e[0],e[1])})}}),Object(g.c)(function(){return O.clearTrack()}),Object(g.e)("line","play-music",function(e,t,n){var a=e.id,r=e.dir,i=e.time;console.log(a,r,i,O.enabled,n.displaying===(!r||"true"===r)),O.enabled&&n.displaying===(!r||"true"===r)&&O.fade(a,"start",i||1e3)}),Object(g.e)("line","stop-music",function(e,t,n){var a=e.id,r=e.dir,i=e.time;O.enabled&&n.displaying===(!r||"true"===r)&&O.fade(a,"stop",i||1e3)});var _=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"music-ui-container"},r.a.createElement("input",{type:"checkbox",className:"music-control-ui-toggle",id:"ui-toggle"}),r.a.createElement("label",{htmlFor:"ui-toggle"}),r.a.createElement("div",{className:"music-control-ui"},r.a.createElement("div",{className:"music-enable-ui"},r.a.createElement("input",{type:"checkbox",id:"music-enable",defaultChecked:!0,onChange:function(e){O.enabled=e.target.checked}}),r.a.createElement("label",{htmlFor:"music-enable"})),r.a.createElement("div",{className:"music-volume-ui"},r.a.createElement("input",{type:"range",id:"music-volume",min:"0",max:"100",onChange:function(t){O.volume=parseFloat(t.target.value)/100,e.forceUpdate()}}),r.a.createElement("label",{htmlFor:"music-volume"},r.a.createElement("div",{className:"vomule-indicator",style:{width:"".concat(162*O.volume,"px")}})))))}}]),t}(a.Component);Object(g.b)("view","music",function(){return r.a.createElement(_,null)});var j={images:{},videos:{}},x=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).changeBackground=function(e,t,a){var r=a.displaying,i=a.scroll_dir;if("indeterminate"!==i){var o=e.next,c=e.previous,s=e.time,u=e.animtype,l=s||500,m=u||"fade";r||"backward"!==i?r&&"forward"===i&&setTimeout(function(){return n.setState({shown_background:o,animation_options:{time:l,type:m}})},10):setTimeout(function(){return n.setState({shown_background:c,animation_options:{time:l,type:m}})},10)}},n.state={shown_background:j.default_background,type:"image"},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){Object(g.e)("line","change-background",this.changeBackground)}},{key:"componentWillUnmount",value:function(){Object(g.f)("line","change-background")}},{key:"render",value:function(){var e=this,t=this.state.animation_options||{},n=t.time,a=t.type;return r.a.createElement("div",{className:"background",style:{animationDuration:"".concat(n||500,"ms")}},Object.keys(j.images).map(function(e){return{id:e,path:j.images[e]}}).map(function(t,n){return r.a.createElement("div",{className:"background-image ".concat(a||"fade").concat(t.id===e.state.shown_background&&"image"===e.state.type?" shown":""),style:{backgroundImage:'url("'.concat(t.path,'")')},key:n})}),Object.keys(j.videos).map(function(e){return{id:e,path:j.videos[e]}}).map(function(t,n){return r.a.createElement("div",{className:"background-wrapper".concat(t.id===e.state.shown_background&&"video"===e.state.type?" shown":""),key:n},r.a.createElement("video",{className:"background-video",src:t.path}))}))}}]),t}(a.Component);Object(g.b)("child","background",function(){return r.a.createElement(x,null)}),Object(g.d)(function(e){if(e.meta&&(j.default_background=e.meta.default_background,e.meta.custom_data)){var t=e.meta.custom_data.resources;t&&(j.images=t.images||{},j.videos=t.videos||{})}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(38);n(19).a.initialize({base:"http://ec2-54-164-152-66.compute-1.amazonaws.com:12354/novels",episode_prefix:"",meta_prefix:""}),o.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(1),r=n(10),i=n(7),o=n(9),c=n(20),s={unknown:"U",warn:"W",error:"E",critical:"C"},u=function(e){function t(e){var n,o,c,u;return Object(a.a)(this,t),"novel_not_found"===e?(o="E",c="fetch",u="\u5c0f\u8aac\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002"):"episode_not_found"===e?(o="E",c="fetch",u="\u5c0f\u8aac\u306e\u90e8\u5206\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002"):(o=s[e.type],c=e.phase,u=e.detail),(n=Object(r.a)(this,Object(i.a)(t).call(this,"".concat(o,":").concat(c,":").concat(u)))).source=void 0,n.source=e,n}return Object(o.a)(t,e),t}(Object(c.a)(Error))}},[[27,1,2]]]);
//# sourceMappingURL=main.ee99b1d0.chunk.js.map